require('dotenv').config()
const { Markup, Telegraf } = require('telegraf')

const bot = new Telegraf(process.env.TELEGRAM_BOT_TOKEN)

const webAppUrl = 'https://lazarusbank.ru' // URL Ð²Ð°ÑˆÐµÐ³Ð¾ Ð¼Ð¸Ð½Ð¸-Ð¿Ñ€Ð¸Ð»Ð¾Ð¶ÐµÐ½Ð¸Ñ


bot.start(async (ctx) => {
  await ctx.replyWithPhoto(
    { source: 'cards.png' },
    {
      caption: 'Lazarus.Finance â€” Ñ‚Ð²Ð¾Ð¹ Ð½Ð°Ð´ÐµÐ¶Ð½Ñ‹Ð¹ Ð¿Ð°Ñ€Ñ‚Ð½ÐµÑ€ Ð´Ð»Ñ Ð¼ÐµÐ¶Ð´ÑƒÐ½Ð°Ñ€Ð¾Ð´Ð½Ð¾Ð³Ð¾ Ð±Ð¸Ð·Ð½ÐµÑÐ°!\n\nÐœÑ‹ ÑÐ¾Ð²Ñ€ÐµÐ¼ÐµÐ½Ð½Ñ‹Ð¹ Ñ†Ð¸Ñ„Ñ€Ð¾Ð²Ð¾Ð¹ ÑÐµÑ€Ð²Ð¸Ñ Ð´Ð»Ñ Ð¾Ð¿Ð»Ð°Ñ‚Ñ‹ Ð¸Ð½Ð²Ð¾Ð¹ÑÐ¾Ð² Ð¸ Ð¿Ð¾Ð»ÑƒÑ‡ÐµÐ½Ð¸Ñ Ð¿ÐµÑ€ÐµÐ²Ð¾Ð´Ð¾Ð² Ð¿Ð¾ Ð²ÑÐµÐ¼Ñƒ Ð¼Ð¸Ñ€Ñƒ.\n\nâ€¢ ÐžÐ¿Ð»Ð°Ñ‚Ð° Ð¸Ð½Ð²Ð¾Ð¹ÑÐ¾Ð² Ð´Ð¾ 1 Ð´Ð½Ñ Ð½Ð° Ð²Ñ‹Ð³Ð¾Ð´Ð½Ñ‹Ñ… ÑƒÑÐ»Ð¾Ð²Ð¸ÑÑ… â€” ÐºÐ¾Ð¼Ð¸ÑÑÐ¸Ñ Ð¾Ñ‚ 0,5%\nâ€¢ ÐŸÐµÑ€ÐµÐ²Ð¾Ð´Ñ‹ Ð½Ð° ÐºÐ¸Ñ‚Ð°Ð¹ÑÐºÐ¸Ðµ ÐºÐ°Ñ€Ñ‚Ñ‹\nâ€¢ Swift Ð¸ SEPA Ð¿ÐµÑ€ÐµÐ²Ð¾Ð´Ñ‹\nâ€¢ ÐžÐ±Ð¼ÐµÐ½ ÐºÑ€Ð¸Ð¿Ñ‚Ð¾Ð²Ð°Ð»ÑŽÑ‚Ñ‹ Ð¸ Ð²Ð°Ð»ÑŽÑ‚Ñ‹ Ñ€Ð°Ð·Ð½Ñ‹Ñ… ÑÑ‚Ñ€Ð°Ð½ Ð² Ñ‚Ð¾Ñ‚ Ð¶Ðµ Ð´ÐµÐ½ÑŒ\nâ€¢ ÐÐ³ÐµÐ½Ñ‚ÑÐºÐ¸Ðµ Ð¿Ð»Ð°Ñ‚ÐµÐ¶Ð¸ Ð´Ð»Ñ ÑŽÑ€ Ð»Ð¸Ñ†\nâ€¢ Ð£Ð´Ð¾Ð±Ð½Ñ‹Ð¹ Ð»Ð¸Ñ‡Ð½Ñ‹Ð¹ ÐºÐ°Ð±Ð¸Ð½ÐµÑ‚ Ð¸ Ð¿Ð¾Ð´Ð´ÐµÑ€Ð¶ÐºÐ° ÐºÐ»Ð¸ÐµÐ½Ñ‚Ð¾Ð² 24/7',
      ...Markup.inlineKeyboard([
        [
          Markup.button.callback('Ðž Ð½Ð°Ñ', 'about'),
          Markup.button.webApp('Ð¡Ð°Ð¹Ñ‚', 'https://lazarusbank.ru')
        ],
        [
          Markup.button.webApp('Ð›Ð¸Ñ‡Ð½Ñ‹Ð¹ ÐºÐ°Ð±Ð¸Ð½ÐµÑ‚', 'https://lazarusbank.ru/login')
        ]
      ])
    }
  )
})

bot.action('about', async (ctx) => {
  await ctx.answerCbQuery()
  await ctx.reply(
    'Lazarus.Finance â€” ÑÐµÑ€Ð²Ð¸Ñ, Ð¿Ð¾Ð·Ð²Ð¾Ð»ÑÑŽÑ‰Ð¸Ð¹ Ñ€ÐµÑˆÐ¸Ñ‚ÑŒ Ð»ÑŽÐ±Ñ‹Ðµ Ñ„Ð¸Ð½Ð°Ð½ÑÐ¾Ð²Ñ‹Ðµ Ð·Ð°Ð´Ð°Ñ‡Ð¸ Ð´Ð»Ñ Ð¸Ð¼Ð¿Ð¾Ñ€Ñ‚ÐµÑ€Ð¾Ð², ÑÐºÑÐ¿Ð¾Ñ€Ñ‚ÐµÑ€Ð¾Ð² Ð¸ Ð´Ñ€ÑƒÐ³Ð¸Ñ… Ð¿Ñ€ÐµÐ´Ð¿Ñ€Ð¸Ð½Ð¸Ð¼Ð°Ñ‚ÐµÐ»ÐµÐ¹.\n\nÐžÑÐ½Ð¾Ð²Ð½Ñ‹Ðµ Ð¿Ñ€ÐµÐ¸Ð¼ÑƒÑ‰ÐµÑÑ‚Ð²Ð° Ñ€Ð°Ð±Ð¾Ñ‚Ñ‹ Ñ Ð½Ð°Ð¼Ð¸:\n\n1. Ð¡Ñ‚Ð°Ñ‚ÑƒÑ Ð¸ Ð»Ð¸Ñ†ÐµÐ½Ð·Ð¸Ñ Ð ÐÐšÐž (Ð Ð°ÑÑ‡ÐµÑ‚Ð½Ð°Ñ Ð½ÐµÐ±Ð°Ð½ÐºÐ¾Ð²ÑÐºÐ°Ñ ÐºÑ€ÐµÐ´Ð¸Ñ‚Ð½Ð°Ñ Ð¾Ñ€Ð³Ð°Ð½Ð¸Ð·Ð°Ñ†Ð¸Ñ)\n\n2. ÐŸÑ€Ð¾Ð·Ñ€Ð°Ñ‡Ð½Ñ‹Ðµ ÑƒÑÐ»Ð¾Ð²Ð¸Ñ Ð¾Ð¿ÐµÑ€Ð°Ñ†Ð¸Ð¹ â€” Ð¿Ð¾Ð´Ñ€Ð¾Ð±Ð½Ð¾ Ñ€Ð°ÑÑÐºÐ°Ð¶ÐµÐ¼ Ð¸ Ð¾Ð±ÑŠÑÑÐ½Ð¸Ð¼, ÐºÐ°Ðº Ñ„Ð¾Ñ€Ð¼Ð¸Ñ€ÑƒÐµÑ‚ÑÑ Ñ†ÐµÐ½Ð° Ð½Ð° Ð»ÑŽÐ±ÑƒÑŽ Ð¸Ð· Ð¾ÐºÐ°Ð·Ð°Ð½Ð½Ñ‹Ñ… ÑƒÑÐ»ÑƒÐ³.\n\n3. Ð¡Ð¾Ð±ÑÑ‚Ð²ÐµÐ½Ð½Ñ‹Ðµ Ð¾Ñ„Ð¸ÑÑ‹ Ð² ÐœÐ¾ÑÐºÐ²Ðµ Ð¸ Ð¡Ð°Ð½ÐºÑ‚-ÐŸÐµÑ‚ÐµÑ€Ð±ÑƒÑ€Ð³Ðµ, Ð° Ñ‚Ð°ÐºÐ¶Ðµ Ð±Ð¾Ð»ÑŒÑˆÐ°Ñ ÑÐµÑ‚ÑŒ Ð¿Ð°Ñ€Ñ‚Ð½ÐµÑ€ÑÐºÐ¸Ñ… Ñ„Ð¸Ð»Ð¸Ð°Ð»Ð¾Ð² Ð²Ð¾ Ð¼Ð½Ð¾Ð³Ð¸Ñ… Ð³Ð¾Ñ€Ð¾Ð´Ð°Ñ… Ð Ð¾ÑÑÐ¸Ð¸.\n\n4. Ð‘Ð¾Ð»ÑŒÑˆÐ¾Ð¹ Ð¾Ñ…Ð²Ð°Ñ‚ Ð¿Ð¾ Ð²ÑÐµÐ¼Ñƒ Ð¼Ð¸Ñ€Ñƒ: Ð•Ð²Ñ€Ð¾Ð¿Ð°, ÐÐ·Ð¸Ñ Ð¸Ð»Ð¸ Ð¡Ð¨Ð â€” Ð¿Ð¾Ð¼Ð¾Ð¶ÐµÐ¼ Ð²Ð°Ð¼ Ð¸Ð· Ð»ÑŽÐ±Ð¾Ð¹ ÑÑ‚Ñ€Ð°Ð½Ñ‹.\n\n5. ÐšÐ¾Ð¼Ð°Ð½Ð´Ð° Ð¿Ñ€Ð¾Ñ„ÐµÑÑÐ¸Ð¾Ð½Ð°Ð»Ð¾Ð²! Ð‘Ð¾Ð»ÐµÐµ 10 Ð»ÐµÑ‚ Ð·Ð°Ð½Ð¸Ð¼Ð°ÐµÐ¼ÑÑ Ð¼ÐµÐ¶Ð´ÑƒÐ½Ð°Ñ€Ð¾Ð´Ð½Ñ‹Ð¼Ð¸ Ð¿ÐµÑ€ÐµÐ²Ð¾Ð´Ð°Ð¼Ð¸ Ð¸ ÑƒÑÐ¿ÐµÑˆÐ½Ð¾ Ð¿Ð¾Ð¼Ð¾Ð³Ð»Ð¸ Ñ‚Ñ‹ÑÑÑ‡Ð°Ð¼ ÐºÐ»Ð¸ÐµÐ½Ñ‚Ð¾Ð²!',
    Markup.inlineKeyboard([
      [
        Markup.button.callback('Ðž Ð½Ð°Ñ', 'about'),
        Markup.button.webApp('Ð¡Ð°Ð¹Ñ‚', 'https://lazarusbank.ru')
      ],
      [
        Markup.button.webApp('Ð›Ð¸Ñ‡Ð½Ñ‹Ð¹ ÐºÐ°Ð±Ð¸Ð½ÐµÑ‚', 'https://lazarusbank.ru/login')
      ]
    ])
  )
})

// bot.help((ctx) => ctx.reply('Send me a sticker'))
// bot.on(message('sticker'), (ctx) => ctx.reply('ðŸ‘'))
// bot.hears('hi', (ctx) => ctx.reply('Hey there'))
bot.launch()

// Enable graceful stop
process.once('SIGINT', () => bot.stop('SIGINT'))
process.once('SIGTERM', () => bot.stop('SIGTERM'))